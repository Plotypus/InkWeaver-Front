<!-- Link Creator Dialog -->
<p-dialog modal="true" header="Create Link" [(visible)]="displayLinkCreator" width="450" height="450" responsive="true">
    <p-dropdown [options]="newLinkPages" [(ngModel)]="newLinkId" filter="true"></p-dropdown>
    <footer>
        <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
            <button pButton type="button" label="Create Link" icon="fa-link" iconPos="right" (click)="createLink()"></button>
        </div>
    </footer>
</p-dialog>

<div class="editor ui-g-9">
    <!-- Editor -->
    <div class="loader" *ngIf="data.inflight">
        <i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>
    </div>
    <div [ngClass]="{'loading-editor': data.inflight}">
        <p-editor [(ngModel)]="data.display">
            <header>
                <span class="ql-formats">
                    <button class="ql-link" (click)="openLink()"></button>
                </span>
                <span class="ql-formats">
                    <!--<select class="ql-header"></select>-->
                    <select class="ql-size"></select>
                    <select class="ql-font"></select>
                </span>
                <span class="ql-formats">
                    <button class="ql-bold"></button>
                    <button class="ql-italic"></button>
                    <button class="ql-underline"></button>
                    <button class="ql-strike"></button>
                </span>
                <span class="ql-formats">
                    <button class="ql-list" value="ordered"></button>
                    <button class="ql-list" value="bullet"></button>
                    <button class="ql-indent" value="+1"></button>
                    <button class="ql-indent" value="-1"></button>
                    <select class="ql-align"></select>
                </span>
                <span class="ql-formats">
                    <button class="ql-script" value="sub"></button>
                    <button class="ql-script" value="super"></button>
                    <button class="ql-clean"></button>
                </span>
                <!--<button class="ql-direction" value="rtl"></button>-->
            </header>
        </p-editor>

        <!-- Word Count -->
        <div class="stats">Word Count: {{wordCount}}</div>
    </div>
</div>

<!-- Navigation -->
<div class="navigation ui-g-3">
    <input pInputText #globalFilter type="text" placeholder="Search Chapter Titles" />
    <i class="search fa fa-search"></i>

    <p-dataTable [value]="data.story.chapters"
                 selectionMode="single"
                 [globalFilter]="globalFilter"
                 [(selection)]="data.chapterSummary"
                 (onRowSelect)="selectChapter($event)">
        <p-column field="title">
            <template pTemplate type="header">
                <div (click)="selectStory()" class="story-title" [ngClass]="{'ui-state-highlight':data.storySelected}">
                    {{data.story.title}}
                </div>
            </template>
        </p-column>
    </p-dataTable>
</div>
